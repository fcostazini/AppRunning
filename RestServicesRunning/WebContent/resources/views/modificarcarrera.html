<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="" name="description">
<meta content="" name="author">



<title>ReCorriendo</title>
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/r/dt/dt-1.10.9/datatables.min.css" />
<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../css/estilos.css" rel="stylesheet">
<link href="../css/font-awesome.min.css" rel="stylesheet"
	type="text/css">
<link href="../img/logo_pestaña.png" rel="shortcut icon">
</head>

<body>

	<div id="wrapper">
		<nav class="navbar navbar-default navbar-static-top"
			style="margin-bottom: 0; background-color: #83C2FB;">
			<div class="navbar-header">
				<img height="100px" src="../img/logo.png">
			</div>
			<!-- Logo -->

			<div class="navbar-default sidebar" style="margin-top: 8%;">
				<div class="sidebar-nav" style="">
					<ul class="nav" id="side-menu">
						<li><a class="active" href="#"><i
								class="fa fa-flag-checkered fa-fw"></i> Carreras<span
								class="fa fa-angle-double-left" style="float: right;"></span></a>

							<ul class="nav nav-second-level">
								<li><a href="carreranueva.html">Nueva</a></li>

								<li><a href="modificarcarrera.html">Modificar</a></li>
							</ul></li>

						<li><a href="#"><i class="fa fa-group fa-fw"></i> Grupos<span
								class="fa fa-angle-double-left" style="float: right;"></span></a>

							<ul class="nav nav-second-level">
								<li><a href="gruponuevo.html">Nuevo</a></li>

								<li><a href="modificargrupo.html">Modificar</a></li>
							</ul></li>

						<li><a href="#"><i class="fa fa-user"></i> Reportes<span
								class="fa fa-angle-double-left" style="float: right;"></span></a>

							<ul class="nav nav-second-level">
								<li><a href="usuarios.html">Usuarios</a></li>

							</ul></li>

					</ul>
				</div>
			</div>
		</nav>
		<!-- Barra navegacion izquierda -->

		<div id="page-wrapper">
			<!-- Tabla y busqueda carrera -->
			<div class="container-fluid">
				<div class="row">
					<!-- Busqueda -->
					<div class="col-lg-12">
						<h1 class="page-header">Buscar carrera</h1>
					</div>

					<div class="row">
						<button id="botonBusqueda" type="button" class="btn btn-info"
							data-toggle="collapse" data-target="#formBusqueda"
							style="margin-bottom: 15px; padding-right: 20px">
							Parametros de busqueda <i class="fa fa-bars"
								style="margin-left: 40%"></i>
						</button>
						<div id="formBusqueda" class="collapse in">
							<div class="col-lg-4">



								<div class="dataTables_filter">
									<label>Nombre carrera<input name="nombreCarrera"
										class="form-control dataField input-sm" placeholder=""
										type="search"></label>
								</div>

								<div class="dataTables_filter">
									<label>Modalidad<input class="form-control input-sm"
										name="modalidad" placeholder="" type="search"></label>
								</div>

								<div class="dataTables_filter">
									<label>Provincia<input
										class="form-control dataField input-sm" name="provincia"
										placeholder="" type="search"></label>
								</div>
							</div>

							<div class="col-lg-4">

								<div class="dataTables_filter">
									<label>Ciudad<input
										class="form-control dataField input-sm" name="ciudad"
										placeholder="" type="search"></label>
								</div>


								<div class="dataTables_filter">
									<label>Fecha Salida Desde<input
										class="form-control input-sm" name="fechaDesde" placeholder=""
										type="date"></label>
								</div>

								<div class="dataTables_filter">
									<label>Hasta<input
										class="form-control dataField input-sm" name="fechaHasta"
										placeholder="" type="date"></label>
								</div>

							</div>
							<div class="row">
								<div class="col-lg-11">
									<div class="dataTables_filter" style="text-align: right;">
										<input id="btnBuscar" class="btn"
											style="margin-top: 20px; margin-bottom: 10px; border: 1px solid grey; margin-right: 6%;"
											type="button" value="Buscar">
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="row">
						<!-- Tabla  -->
						<table cellspacing="0" class="table table-striped table-bordered"
							id="dataTable" width="100%">
							<thead>
								<tr>
									<th>Logo</th>
									<th>Nombre carrera</th>
									<th>Provincia</th>
									<th>Ciudad</th>
									<th>Distancia</th>
									<th>Acciones</th>

								</tr>
							</thead>
							<tbody>
								<tr name="template" display='none'>
									<td class="logo_center" name="urlImagen" isLogo><img
										src="" onerror="this.src='../img/logo_pestaña.png'"
										height="100px" width="100px"></td>
									<td name="nombre"></td>
									<td name="provincia"></td>
									<td name="ciudad"></td>

									<td name="distanciaDisponible"></td>
									<td name="actions" skip><a href="#" name="edit"
										class="btn btn-info btn-sm"> <span
											class="glyphicon glyphicon-pencil"></span>
									</a> <!-- <a href="#" name="delete"  class="btn btn-danger btn-sm">
    									<span class="glyphicon glyphicon-trash"></span>
  									</a> --></td>
								</tr>
							</tbody>
						</table>
					</div>
					<!-- /.col-lg-12 -->
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
		</div>
		<!-- /#page-wrapper -->
	</div>
	<!-- /#wrapper -->
	<!-- jQuery -->
	<script src="../jquery/jquery.min.js"></script>
	<!-- Bootstrap Core JavaScript -->
	<script src="../js/bootstrap.min.js"></script>
	<!-- Custom Theme JavaScript -->
	<script src="../js/custom.js"></script>
	<script src="../js/utils.js"></script>
	<div class="modal fade" id="delete" tabindex="-1">
		<!-- Pop up confirmacion para borrado de registro -->
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button class="close" data-dismiss="modal" type="button">
						<span class="glyphicon glyphicon-remove"></span>
					</button>

					<h4 class="modal-title custom_align" id="Heading">Borrar
						registro</h4>
				</div>

				<div class="modal-body">
					<div class="alert alert-danger">
						<span class="glyphicon glyphicon-warning-sign"></span> ¿Esta
						seguro que quiere borrar el registro?
					</div>
				</div>

				<div class="modal-footer">
					<button class="btn btn-success" type="button">
						<span class="glyphicon glyphicon-ok-sign"></span>&nbsp;Yes
					</button>
					<button class="btn btn-default" data-dismiss="modal" type="button">
						<span class="glyphicon glyphicon-remove"></span>&nbsp;No
					</button>
				</div>
			</div>
		</div>
	</div>
</body>

<script>
	function mapToTable(data, table) {
		var row;
		$(table).find("tbody").empty();
		$(data).each(
				function(i, e) {
					
					row = rowTemplate.clone();
					$(row).data("carrera", e);
					row.find("td:not([skip])").each(
							function(j, td) {
								if ($(td).is("[isLogo]")) {
									$(td).find("img").attr("src",
											e[$(td).attr("name")]);
								} else {
									$(td).html(e[$(td).attr("name")]);
								}

							});
					row.find("a[name='edit']").attr("href",
							"carreranueva.html?codigo=" + e.codigoCarrera);
					$(table).append(row);

				})
	}

	var rowTemplate;
	$(document)
    .ready(
        function() {

            $("#formBusqueda input").keyup(function(event) {
                if (event.keyCode == 13) {
                    $("#btnBuscar").click();
                }
            });
            rowTemplate = $("#dataTable tr[name='template']")
                .clone()
            rowTemplate.removeAttr('display').removeAttr('name');
            $("#dataTable tbody").empty();
            $("#btnBuscar")
                .bind(
                    "click",
                    function() {
                        var formBusqueda = getFormData("#formBusqueda");
                        if (!jQuery.isEmptyObject(formBusqueda)) {
                                var settings = {
                                    "async": true,
                                    "url": "http://191.237.16.124/RestServicesRunning-0.0.1-SNAPSHOT/running/carreras/carreraByFiltro",
                                    "method": "POST",
                                    "headers": {
                                        "accept": "application/json",
                                        "content-type": "application/json; charset=UTF-8"
                                    },
                                    "data": JSON
                                        .stringify(getFormData($("#formBusqueda")))
                                }

                                $
                                    .ajax(settings)
                                    .done(
                                        function(data) {
                                            mapToTable(
                                                data.dto,
                                                $("#dataTable"));
                                            $(data.dto)
                                                .each()
                                            console
                                                .log(data);
                                        });
                            }
                        })

                    var formBusqueda = getFormData($("#formBusqueda"));
                    if (!jQuery.isEmptyObject(formBusqueda)) {
                        $("#btnBuscar").click()

                    }

                });
</script>
</html>